# =============================================================================
# STORYTELLER - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your actual values

# Server
PORT=5100
NODE_ENV=development

# PostgreSQL Database
# Use same PostgreSQL server as other projects, new database for storyteller
DATABASE_URL=postgres://postgres:YOUR_PASSWORD@localhost:5432/storyteller_db

# OpenAI API (copy from C:\inetpub\wwwroot\olivebranch\.env)
OPENAI_API_KEY=sk-proj-...
STORY_MODEL=gpt-4
FAST_MODEL=gpt-4o-mini

# ElevenLabs TTS (copy from C:\inetpub\wwwroot\voidbound\.env)
ELEVENLABS_API_KEY=sk_...
DEFAULT_VOICE_ID=21m00Tcm4TlvDq8ikWAM

# Whisper Integration (existing whisper service)
WHISPER_SERVICE_URL=http://localhost:3003

# Session Configuration
# IMPORTANT: Generate a secure random secret for production!
# Run: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
SESSION_SECRET=CHANGE_ME_generate_64_byte_hex_string

# Content Safety
MAX_GORE_LEVEL=50
MAX_HORROR_LEVEL=70
ENABLE_ADULT_CONTENT=false

# Performance
MAX_CONTEXT_TOKENS=4000
SCENE_TARGET_WORDS=150
AUDIO_CACHE_DIR=./public/audio

# CORS (add your domains)
ALLOWED_ORIGINS=http://localhost,http://localhost:5173,https://localhost,https://ay-i-t.com

# Logging
LOG_LEVEL=info
LOG_DIR=./logs

# =============================================================================
# AUTHENTICATION
# =============================================================================

# Google OAuth 2.0
# Create credentials at: https://console.cloud.google.com/apis/credentials
# Project: storyteller-480320
GOOGLE_CLIENT_ID=your-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=GOCSPX-your-client-secret
GOOGLE_CALLBACK_URL=/api/auth/google/callback

# Authorized JavaScript Origins:
#   - https://ay-i-t.com
#   - http://localhost
#
# Authorized Redirect URIs:
#   - https://ay-i-t.com/storyteller/api/auth/google/callback
#   - http://localhost/storyteller/api/auth/google/callback

# JWT Configuration
# IMPORTANT: Generate a secure random secret for production!
# Run: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=CHANGE_ME_generate_64_byte_hex_string
JWT_EXPIRES_IN=7d

# Admin Users (comma-separated emails that get admin access)
ADMIN_EMAILS=your-admin-email@gmail.com

# Dev Login (optional, for local testing only)
DEV_LOGIN_ENABLED=false
DEV_LOGIN_TOKEN=CHANGE_ME_dev_login_token
DEV_LOGIN_EMAIL=dev@storyteller.local
DEV_LOGIN_NAME=Developer
DEV_LOGIN_IS_ADMIN=false

# Dev-only token fallback (optional, for local IIS/header debugging only)
# WARNING: Keep both false outside localhost - query tokens can leak via logs/URLs.
ALLOW_QUERY_TOKEN=false
ALLOW_SOCKET_QUERY_TOKEN=false

# =============================================================================
# PAYMENT (PayPal)
# =============================================================================
# Create app at: https://developer.paypal.com/dashboard/applications

# PayPal API Credentials
PAYPAL_CLIENT_ID=your-paypal-client-id
PAYPAL_CLIENT_SECRET=your-paypal-client-secret
PAYPAL_WEBHOOK_ID=your-webhook-id
PAYPAL_MODE=sandbox

# PayPal Subscription Plan IDs (create via PayPal API or Dashboard)
PAYPAL_PLAN_ID_DREAMER=P-xxx
PAYPAL_PLAN_ID_STORYTELLER=P-xxx
PAYPAL_PLAN_ID_FAMILY=P-xxx

# =============================================================================
# TESTING
# =============================================================================
# Base URL used by server/tests/api.test.js (optional)
TEST_URL=http://localhost:5100

# Base URL used by Playwright e2e tests in /test
E2E_BASE_URL=http://localhost:5173

# Optional auth token for API tests that hit authenticated endpoints
TEST_AUTH_TOKEN=
